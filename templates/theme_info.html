{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>테마 정보</h2>

    <form method="get">

        <!-- 필터 -->
        <div style="margin-bottom: 10px;">
            지역:
            <select name="location_filter" class="form-control-sm" style="margin-right: 20px;">
                {% for choice in location_list %}
                <option value="{{ choice }}" {% if choice == location_filter %}selected{% endif %}>
                    {{ choice }}
                </option>
                {% endfor %}
            </select>
            평점:
            <select name="rating_filter" class="form-control-sm" style="margin-right: 20px;">
                {% for choice in rating_choices %}
                <option value="{{ choice }}" {% if choice == rating_filter %}selected{% endif %}>
                    {% if choice != "전체" %}
                    {{ choice }} 점 이상
                    {% else %}
                    {{ choice }}
                    {% endif %}
                </option>
                {% endfor %}
            </select>
        </div>

        <!-- 정렬 -->
        <div style="margin-bottom: 10px;">
            정렬:
            <select name="sort_option" class="form-control-sm">
                {% for choice in sort_option_list %}
                <option value="{{ choice }}" {% if choice == sort_option %}selected{% endif %}>
                    {{ choice }}
                </option>
                {% endfor %}
            </select>
        </div>

        <input type="submit" value="적용" class="btn btn-primary mt-2">
    </form>

    <table class="table table-striped">
        <thead>
        <tr>
            <th>지역</th>
            <th>테마</th>
            <th>평점</th>
            <th>난이도</th>
            <th>공포도</th>
            <th>리뷰 수</th>
            <th>추천 비율</th>
        </tr>
        <tr>
            <th colspan="5">예약 가능 시간</th>
            <th>예약링크</th>
        </tr>
        </thead>
        <tbody>
        {% for theme in theme_list %}
        <tr>
            <td>{{ theme.loc_2 }}</td>
            <td>{{ theme.theme_name }}</td>
            <td>{{ theme.satisfy_score }}</td>
            <td>{{ theme.difficulty_score }}</td>
            <td>{{ theme.fear_score }}</td>
            <td>{{ theme.total_review }}</td>
            <td>{{ theme.recommend_ratio }}</td>
            <!-- 여기에 필요한 다른 필드들의 값을 추가하세요 -->
        </tr>
        <tr>
            <td colspan="5">
                {% for rsv_info in theme.latest_reserve_info %}
                    {{ rsv_info.rsv_datetime|date:"m/d H:i" }} &emsp;
                    {% if forloop.counter|divisibleby:8 %}
                    <br>
                    {% endif %}
                {% endfor %}
            </td>
            <td style="white-space: nowrap;"><a href="{{ theme.rsv_url }}" target="_blank"> 예약하기 </a></td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
